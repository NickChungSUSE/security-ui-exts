<template>
    <div class="registry-status-record">
        <div class="scan-name">{{ registryStatus.scan_name }}</div>
        <div class="registry-name">{{ registryStatus.registry_name }}</div>
        <div class="prev-status"><RegisterStatusBadge :status="registryStatus.prev_status"/></div>
        <div class="arrow"></div>
        <div  class="curr-status"><RegisterStatusBadge :status="registryStatus.curr_status"/></div>
        <div class="update-time">{{ `${updateTime(registryStatus.last_update_time)} ${t("imageScanner.general.ago")}`}}</div>
    </div>
</template>

<script>
  import RegisterStatusBadge from "./RegisterStatusBadge";
  import { elapsedTime } from "@shell/utils/time";
  export default {
    name: 'registryStatusUpdate',
    components: {
      RegisterStatusBadge,
    },
    props: {
        registryStatus: {
            type: Object,
            required: true
        }
    },
    methods: {
        updateTime(lastUpdateTime) {
            return  elapsedTime(Date.now() / 1000 - lastUpdateTime).label;
        }
    }
  }
</script>

<style lang="scss" scoped>
    .registry-status-record {
        display: flex;
        padding: 4px 0px;
        align-items: center;
        align-self: stretch;
        .scan-name {
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 1;
            flex: 6;
            overflow: hidden;
            color: #5696CE;
            text-overflow: ellipsis;
            font-family: Lato;
            font-size: 14px;
            font-style: normal;
            font-weight: 400;
            line-height: 21px;
        }
        .registry-name {
            flex: 12;
            overflow: hidden;
            color: #141419;
            text-overflow: ellipsis;
            font-family: Lato;
            font-size: 14px;
            font-style: normal;
            font-weight: 400;
            line-height: 21px;
        }
        .prev-status { 
            flex: 5;
        }
        .arrow {
            flex: 2;
            width: 16px;
            height: 16px;
            background: url('../../assets/img/right.svg') no-repeat center center;
            background-size: contain;
        }
        .curr-status { 
            flex: 5;
        }
        .update-time {
            flex: 6;
            margin-left: 8px;
            color: #141419;
            font-family: Lato;
            font-size: 14px;
            font-style: normal;
            font-weight: 400;
            line-height: 21px;
        }
    }
</style>