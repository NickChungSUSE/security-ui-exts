import { IPlugin } from '@shell/core/types';
import { PRODUCT_NAME, PAGE } from '@sbombastic-image-vulnerability-scanner/types';

export function init($plugin: IPlugin, store: any) {

    const {
        product,
        virtualType,
        basicType
    } = $plugin.DSL(store, PRODUCT_NAME);

    // registering a cluster-level product
    product({
        icon: 'pod_security',
        inStore: 'cluster',
    });

    // => => => creating a custom page
    virtualType({
        label: store.getters['i18n/t']('image_scanner.registries.title'),
        name:   PAGE.REGISTRIES,
        namespaced: false,
        route:    {
            name:   `c-cluster-${PRODUCT_NAME}-${PAGE.REGISTRIES}`,
            params: {
                product: PRODUCT_NAME
            },
            meta: { pkg: PRODUCT_NAME, product: PRODUCT_NAME }
        }
    });

    basicType([
        PAGE.REGISTRIES
    ]);
}